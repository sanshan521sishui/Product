!function(I){I.fn.carousel=function(e){for(var t,n,i=e.carousel,a=e.indexContainer,s=I(i).children("li"),c=s.length,l=e.prev,o=e.next,h=e.timing,d=e.animateTime,f=e.autoPlay,r=1,p="js_index",g=!0,u=s.width()*(s.length+2),x=e.direction,m=1;m<=s.length;m++)I(a).append("<li>"+m+"</li>");function w(){switch(x){case"right":t=window.setInterval("$.rightChangeImg();",h);break;case"left":t=window.setInterval("$.leftChangeImg();",h);break;default:t=window.setInterval("$.leftChangeImg();",h)}}I(i).width(u).append(I(s[0]).clone()).prepend(I(s[s.length-1]).clone()).css("left","-"+s.width()+"px"),s=I(i).children("li"),n=I(a).children("li"),I(n[r-1]).addClass(p),f&&(w(),I(i+","+l+","+o+","+a).hover(function(){window.clearInterval(t)},function(){w()})),I.extend({changeIndex:function(e){I(n).removeClass(p),I(n[e]).addClass(p)}}),I.extend({leftChangeImg:function(){g=!1,r==c&&(r=0,I(i).stop(!0,!0).css("left","0px")),r++,I(i).stop(!0,!0).animate({left:"-="+s.width()+"px"},d),setTimeout(function(){r==c&&(r=0,I(i).stop(!0,!0).css("left","0px")),g=!0},d),I.changeIndex(r-1)}}),I.extend({rightChangeImg:function(){g=!1,0==r&&(r=c,I(i).stop(!0,!0).css("left","-"+e+"px")),r--;var e=u-2*s.width();I(i).stop(!0,!0).animate({left:"+="+s.width()+"px"},d),setTimeout(function(){0==r&&(r=c,I(i).stop(!0,!0).css("left","-"+e+"px")),g=!0},d),0==r?I.changeIndex(c-1):I.changeIndex(r-1)}}),I(o).on("click",function(){var e=Math.abs(parseInt(I(i).css("left"))),t=u-2*s.width();g&&(e==t&&(r=0,I(i).stop(!0,!0).css("left","0px")),I.leftChangeImg())}),I(l).on("click",function(){var e=Math.abs(parseInt(I(i).css("left"))),t=u-2*s.width();g&&(0==e&&(r=c,I(i).stop(!0,!0).css("left","-"+t+"px")),I.rightChangeImg())}),n.on("click",function(){var e,t=I(this).index()+1;g&&(r<t?(I.changeIndex(t-1),g=!1,e=(t-r)*s.width(),r=t,I(i).stop(!0,!0).animate({left:"-="+e+"px"},d),setTimeout(function(){g=!0},d)):t<r&&(I.changeIndex(t-1),g=!1,e=(r-t)*s.width(),r=t,I(i).stop(!0,!0).animate({left:"+="+e+"px"},d),setTimeout(function(){g=!0},d)))})}}(jQuery);